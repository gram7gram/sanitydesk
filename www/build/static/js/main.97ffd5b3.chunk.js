(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{188:function(e,t,a){},189:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(21),o=a(3),l=a(1),s=a(61),i=a(62),u=a(10),d=a.n(u),m=a(68),p=a(11),E=a(35),v=a.n(E),f="Notes/SAVE_SUCCESS",h="Notes/TOGGLE_ADD_FORM",y="Notes/CHANGED",g=Object(l.c)({text:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return null;case y:return void 0!==t.payload.text?t.payload.text:e;case f:return t.payload.text;default:return e}},title:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return null;case y:return void 0!==t.payload.title?t.payload.title:e;case f:return t.payload.title;default:return e}},id:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return null;case f:return t.payload.id;default:return e}},createdAt:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case h:return null;case f:return t.payload.createdAt;default:return e}}});function N(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var O,b=Object(l.c)({items:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;switch(a.type){case y:return t.map(function(e){return e.id===a.payload.id?function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?N(a,!0).forEach(function(t){Object(p.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):N(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{},a.payload):e});case f:return(e=Object(m.a)(t)).push(a.payload),Object.values(v()(e,"id"));case"Notes/REMOVE_SUCCESS":return e=t.filter(function(e){return e.id!==a.payload.id}),Object.values(v()(e,"id"));case"Notes/FETCH_SUCCESS":return a.payload.items;default:return t}},isLoading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"Notes/FETCH_FAILURE":case"Notes/FETCH_SUCCESS":return!1;case"Notes/FETCH_BEFORE":return!0;default:return e}},isAddVisible:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return!1;case h:return!!t.payload;default:return e}},isSaving:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"Notes/SAVE_FAILURE":case"Notes/REMOVE_FAILURE":case f:case"Notes/REMOVE_SUCCESS":return!1;case"Notes/SAVE_BEFORE":case"Notes/REMOVE_BEFORE":return!0;default:return e}},model:g,serverError:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"Notes/SAVE_FAILURE":case"Notes/REMOVE_FAILURE":case"Notes/FETCH_FAILURE":return e.payload&&e.payload.data&&e.payload.data.detail?e.payload.data.detail:null;default:return null}}}),L="Login/LOGOUT",S=Object(l.c)({isAuthenticated:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];switch((arguments.length>1?arguments[1]:void 0).type){case"Login/LOGIN_SUCCESS":return!0;case"Login/LOGIN_BEFORE":case"Login/LOGIN_FAILURE":case L:return!1;default:return e}},username:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case L:return null;case"Login/CHANGED":return void 0!==t.payload.username?t.payload.username:e;default:return e}},accessToken:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Login/LOGIN_SUCCESS":return t.payload.accessToken;case"Login/LOGIN_BEFORE":case L:return null;default:return e}},serverError:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"Login/LOGIN_FAILURE":return t.payload&&t.payload.data&&t.payload.data.detail?t.payload.data.detail:null;case"Login/LOGIN_BEFORE":case"Login/LOGIN_SUCCESS":return null;default:return e}}}),C=[s.a,i.a],_=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,j=d.a.get("accessToken"),A={Login:{isAuthenticated:!!j,accessToken:j}},w=a(63),F=a(64),R=a(69),x=a(65),k=a(70),I=a(66),T=a(6),U=a.n(T),G="https://sanitydesk-api.thebaronmunchausen.com/index.php",V=a(12),D=a(67),B=a.n(D),H=function(e){var t=e.model,a=Object(n.useState)(!1),c=Object(V.a)(a,2),l=c[0],s=c[1],i=Object(n.useState)(!1),u=Object(V.a)(i,2),d=u[0],m=u[1],E=Object(n.useState)(!1),v=Object(V.a)(E,2),h=v[0],g=v[1],N=Object(o.c)(),b=t.title||t.text,L=function(e){return function(a){N({type:y,payload:Object(p.a)({id:t.id},e,a.target.value)}),g(!0),S()}},S=function(){h&&(clearTimeout(O),O=setTimeout(C,1e3))},C=function(){if(b&&!d){m(!0);try{N(function(e,t){return function(a,n){var r=n().Login.accessToken;a({type:"Notes/SAVE_BEFORE"}),(e.id?U.a.put(G+"/v1/notes/".concat(e.id),e,{headers:{Authorization:r}}):U.a.post(G+"/v1/notes",e,{headers:{Authorization:r}})).then(function(e){var n=e.data;t&&t(),a({type:f,payload:n})}).catch(function(e){console.log(e),t&&t(),a({type:"Notes/SAVE_FAILURE",payload:{status:e.response?e.response.status:0,data:e.response?e.response.data:null}})})}}(t,function(){m(!1),g(!1)}))}catch(e){console.log(e)}}},_=function(){s(!0),S()},j=function(){s(!1),S()};return r.a.createElement("div",{className:"card mb-2 bg-dark text-light"+(l?" border-light":"")},r.a.createElement("div",{className:"card-header p-1"},r.a.createElement("input",{type:"text",className:"form-control form-control-sm bg-transparent text-light note-input",placeholder:"Enter title...",onChange:L("title"),onFocus:_,onBlur:j,value:t.title||""})),r.a.createElement("div",{className:"card-body p-1"},r.a.createElement("textarea",{className:"form-control form-control-sm bg-transparent text-light note-input",onChange:L("text"),placeholder:"Enter your note...",onFocus:_,onBlur:j,value:t.text||""})),r.a.createElement("div",{className:"card-footer p-1 "},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6 text-left"},t.createdAt?r.a.createElement("div",{className:"small text-muted"},"Last update: ",B()(t.createdAt).format("HH:mm")):null),r.a.createElement("div",{className:"col-6 text-right"},t.id&&!d?r.a.createElement("i",{className:"fa fa-trash p-2",onClick:function(){if(!d){m(!0);try{N(function(e,t){return function(a,n){var r=n().Login.accessToken;a({type:"Notes/REMOVE_BEFORE"}),U.a.delete(G+"/v1/notes/".concat(e.id),{headers:{Authorization:r}}).then(function(){t&&t(),a({type:"Notes/REMOVE_SUCCESS",payload:{id:e.id}})}).catch(function(e){console.log(e),t&&t(),a({type:"Notes/REMOVE_FAILURE",payload:{status:e.response?e.response.status:0,data:e.response?e.response.data:null}})})}}(t,function(){m(!1),g(!1)}))}catch(e){console.log(e)}}}}):null,d?r.a.createElement("i",{className:"fa fa-spin fa-circle-notch p-2"}):null))))},M=function(e){function t(){var e,a;Object(w.a)(this,t);for(var n=arguments.length,c=new Array(n),o=0;o<n;o++)c[o]=arguments[o];return(a=Object(R.a)(this,(e=Object(x.a)(t)).call.apply(e,[this].concat(c)))).toggleAdd=function(){a.props.dispatch({type:h,payload:!0})},a.logout=function(){d.a.remove("accessToken"),a.props.dispatch({type:L})},a.renderContent=function(){var e=a.props.Notes,t=e.items,n=e.isLoading,c=e.isAddVisible,o=e.model;return 0!==t.length||c?r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row"},c?r.a.createElement("div",{className:"col-12 col-md-6 col-lg-4 col-xl-3"},r.a.createElement(H,{model:o})):null,t.map(function(e){return r.a.createElement("div",{key:e.id,className:"col-12 col-md-6 col-lg-4 col-xl-3"},r.a.createElement(H,{model:e}))}))):n?r.a.createElement("div",{className:"text-center py-3"},r.a.createElement("i",{className:"fa fa-spin fa-circle-notch fa-2x"})):r.a.createElement("div",{className:"text-center py-3"},r.a.createElement("h4",null,"There are no notes"),r.a.createElement("p",null,"Start creating your notes by pressing Add"))},a}return Object(k.a)(t,e),Object(F.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(function(e,t){var a=t().Login.accessToken;e({type:"Notes/FETCH_BEFORE"}),U.a.get(G+"/v1/notes",{headers:{Authorization:a}}).then(function(t){var a=t.data;e({type:"Notes/FETCH_SUCCESS",payload:a})}).catch(function(t){console.log(t),e({type:"Notes/FETCH_FAILURE",payload:{status:t.response?t.response.status:0,data:t.response?t.response.data:null}})})})}},{key:"render",value:function(){var e=this.props.Notes.serverError;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card my-3 bg-darker text-light"},r.a.createElement("div",{className:"card-header"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-6"},r.a.createElement("h3",{className:"m-0"},"SanityDesk Notes")),r.a.createElement("div",{className:"col-6 text-right"},r.a.createElement("button",{className:"btn btn-sm btn-success mr-1",onClick:this.toggleAdd},r.a.createElement("i",{className:"fa fa-plus"})," Add"),r.a.createElement("button",{className:"btn btn-sm btn-secondary",onClick:this.logout},r.a.createElement("i",{className:"fa fa-sign-out-alt"})," Logout")))),r.a.createElement("div",{className:"card-body"},e?r.a.createElement("div",{className:"alert alert-danger"},e):null,this.renderContent())))))}}]),t}(r.a.Component),P=Object(I.a)({Notes:function(e){return e.Notes}}),z=Object(o.b)(P)(M),J=(a(187),a(188),function(){var e,t=Object(n.useState)(!1),a=Object(V.a)(t,2),c=a[0],l=a[1],s=Object(o.c)(),i=Object(o.d)(function(e){return e.Login}),u=i.username,m=i.serverError,E=!!u;return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12"},r.a.createElement("div",{className:"card my-3 bg-darker text-light"},r.a.createElement("div",{className:"card-header"},r.a.createElement("h3",{className:"m-0 text-center"},"SanityDesk Notes")),r.a.createElement("div",{className:"card-body text-center"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-8 col-md-6 mx-auto"},m?r.a.createElement("div",{className:"alert alert-danger"},m):null,r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",className:"form-control text-center",value:u||"",placeholder:"Enter your username...",onChange:(e="username",function(t){s({type:"Login/CHANGED",payload:Object(p.a)({},e,t.target.value)})})})),r.a.createElement("button",{className:"btn btn-block btn-primary",onClick:function(){l(!0),s(function(e,t){return function(a){a({type:"Login/LOGIN_BEFORE"}),U.a.post(G+"/v1/login",{username:e}).then(function(e){var n=e.data;t&&t(),d.a.set("accessToken",n.accessToken),a({type:"Login/LOGIN_SUCCESS",payload:n})}).catch(function(e){console.log(e),t&&t(),a({type:"Login/LOGIN_FAILURE",payload:{status:e.response?e.response.status:0,data:e.response?e.response.data:null}})})}}(u,function(){l(!1)}))},disabled:!E||c},r.a.createElement("i",{className:"fa "+(c?"fa-spin fa-circle-notch":"fa-key")}),"\xa0",c?"Checking...":"Login"))))))))}),X=document.getElementById("root");try{var q=Object(l.e)(Object(l.c)({Login:S,Notes:b}),A,_(l.a.apply(void 0,C)));Object(c.render)(r.a.createElement(o.a,{store:q},r.a.createElement(function(e){var t=e.children;return Object(o.d)(function(e){return e.Login.isAuthenticated})?t:r.a.createElement(J,null)},null,r.a.createElement(z,null))),X)}catch(K){console.error(K)}},71:function(e,t,a){e.exports=a(189)}},[[71,1,2]]]);
//# sourceMappingURL=main.97ffd5b3.chunk.js.map